# Azure VNet Subnets module

Module to provision vnet-subnets on azure


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers


- azurerm (hashicorp/azurerm)

### Module dependencies


- resource_group - [github.com/cloud-native-toolkit/terraform-azure-resource-group](https://github.com/cloud-native-toolkit/terraform-azure-resource-group) (>= 1.0.0)
- vnet - [github.com/cloud-native-toolkit/terraform-azure-vnet](https://github.com/cloud-native-toolkit/terraform-azure-vnet) (>= 1.0.2)

## Example usage

```hcl
module "master_subnet" {
  source = "github.com/cloud-native-toolkit/terraform-azure-subnets"

  acl_rules = var.master_subnet_acl_rules == null ? null : jsondecode(var.master_subnet_acl_rules)
  disable_private_link_endpoint_network_policies = var.master_subnet_disable_private_link_endpoint_network_policies
  disable_private_link_service_network_policies = var.master_subnet_disable_private_link_service_network_policies
  ipv4_cidr_blocks = var.master_subnet_ipv4_cidr_blocks == null ? null : jsondecode(var.master_subnet_ipv4_cidr_blocks)
  label = var.master_subnet_label
  provision = var.master_subnet_provision
  region = var.region
  resource_group_name = module.resource_group.name
  service_endpoints = var.master_subnet_service_endpoints == null ? null : jsondecode(var.master_subnet_service_endpoints)
  subnet_name = var.master_subnet_subnet_name
  vnet_name = module.vnet.name
}

```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| resource_group_name | The name of the Azure resource group where the VNet has been provisioned. | true |  | resource_group.name |
| region | The IBM Cloud region where the cluster will be/has been installed. | true |  |  |
| vnet_name | The name of the VNet instance | true |  | vnet.name |
| subnet_name | The name of the subnet instance | true |  |  |
| label | Label for the subnets created | false | default |  |
| provision | Flag indicating that the subnet should be provisioned. If 'false' then the subnet will be looked up. | false | true |  |
| ipv4_cidr_blocks | List of ipv4 cidr blocks for the subnets that will be created (e.g. ['10.10.10.0/24']). If you are providing cidr blocks then a value must be provided for each of the subnets. If you don't provide cidr blocks for each of the subnets then values will be generated using the {ipv4_address_count} value. | false |  |  |
| acl_rules | List of rules to set on the subnet access control list | false | [] |  |
| service_endpoints | The list of service endpoints for the subnet | false | Microsoft.ContainerRegistry |  |
| disable_private_link_endpoint_network_policies | Flag to disable private link endpoint network policies in the subnet. | true |  |  |
| disable_private_link_service_network_policies | Flag to disable private link service network policies in the subnet. | true |  |  |

### Outputs

| Name | Description |
|------|-------------|
| count | The number of subnets created |
| name | The name prefix for the subnets |
| ids | List of the ids created |
| id | The id of the first subnet |
| names | List of the subnet names |
| subnets | Object list of the subnets - id, zone and label. |
| acl_id | Id of the created network security group |
| vnet_name | Pass-through of the VNet name associated with the subnets |
| vnet_id | Pass-through of the VNet id associated with the subnets |
| cidr_blocks | List of the CIDR blocks assigned to the subnets |

## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (0.1.8)
